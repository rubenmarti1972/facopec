<section class="section" id="inicio" data-strapi-collection="home" data-strapi-section="hero">
  <div class="container">
    <div class="hero-stage">
      <!-- Calendario flotante a la izquierda -->
      <aside class="calendar-sidebar" data-strapi-section="event-calendar" *ngIf="eventCalendar.length">
        <div class="calendar-widget">
          <div class="calendar-widget__header">
            <span class="section__eyebrow">Pr√≥ximas actividades</span>
            <h3 class="calendar-widget__title">Calendario</h3>
          </div>
          <div class="calendar-widget__events">
            <article
              class="calendar-event-compact"
              *ngFor="let event of eventCalendar"
              [class.calendar-event-compact--highlighted]="event.isHighlighted"
              [ngClass]="event.color ? 'calendar-event-compact--' + event.color : ''"
            >
              <div class="calendar-event-compact__date">
                <span class="calendar-event-compact__day">{{ event.eventDate | date: 'dd' }}</span>
                <span class="calendar-event-compact__month">{{ event.eventDate | date: 'MMM' }}</span>
              </div>
              <div class="calendar-event-compact__content">
                <h4 class="calendar-event-compact__title">{{ event.title }}</h4>
                <p class="calendar-event-compact__time" *ngIf="event.eventDate">
                  üïê {{ event.eventDate | date: 'shortTime' }}
                </p>
                <span class="calendar-event-compact__category">{{ event.category }}</span>
              </div>
            </article>
          </div>
        </div>
      </aside>

      <div class="hero-stage__main">
        <div class="hero">
          <!-- Fila superior: Logos, Eyebrow y T√≠tulo -->
          <div class="hero__header">
            <a
              class="hero__logo hero__logo--left"
              href="https://www.icbf.gov.co/pj-4829-fundacion-afrocolombiana-profe-en-casa"
              target="_blank"
              rel="noopener"
              title="Ministerio del Interior">
              <img src="assets/supporters/logo-interior.png" alt="Logo Ministerio del Interior de Colombia" />
              <div class="hero__logo-text">
                <span class="hero__logo-title">MINISTERIO DEL INTERIOR</span>
                <span class="hero__logo-resolution">RESOLUCI√ìN N. OBRPUN6882024 del 26/11/2024</span>
              </div>
            </a>

            <div class="hero__header-center">
              <span class="hero__badge">{{ hero.eyebrow }}</span>
              <h1 class="hero__title hero__title--large">
                <span *ngFor="let line of hero.title">{{ line }}</span>
              </h1>
            </div>

            <a
              class="hero__logo hero__logo--right"
              href="https://www.icbf.gov.co/pj-4829-fundacion-afrocolombiana-profe-en-casa"
              target="_blank"
              rel="noopener"
              title="ICBF">
              <img src="assets/supporters/logo-bienestar.png" alt="Logo Instituto Colombiano de Bienestar Familiar" />
              <div class="hero__logo-text">
                <span class="hero__logo-title">ICBF</span>
                <span class="hero__logo-resolution">RESOLUCI√ìN N. 4829 del 26/08/2025</span>
              </div>
            </a>
          </div>

          <!-- Carousel -->
          <div class="hero__carousel">
            <app-hero-carousel
              [images]="carouselImages"
              [autoPlayInterval]="6000"
              [autoPlay]="true">
            </app-hero-carousel>
          </div>

          <!-- Fila con Impact strip + Mensaje b√≠blico + Botones -->
          <div class="hero__content-row">
            <!-- Impact strip -->
            <div class="impact-strip" data-strapi-section="impact">
              <div class="impact-strip__items">
                <div class="impact-strip__item" *ngFor="let item of impactHighlights" [attr.data-strapi-uid]="item.dataStrapiUid">
                  <div class="impact-strip__icon">
                    <img *ngIf="item.imagePath" [src]="item.imagePath" [alt]="item.title" loading="lazy" />
                    <span *ngIf="!item.imagePath" class="impact-strip__icon-emoji">{{ item.icon }}</span>
                  </div>
                  <div>
                    <p class="impact-strip__title">{{ item.title }}</p>
                    <p class="impact-strip__label">{{ item.label }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Mensaje b√≠blico -->
            <div class="callout" data-strapi-collection="hero.verse">
              <div class="callout__badge">{{ hero.verse.reference }}</div>
              <p class="callout__title">{{ hero.verse.text }}</p>
              <p class="callout__text">{{ hero.verse.description }}</p>
              <div class="callout__media" aria-hidden="true">
                <img [src]="globalLogoUrl" [alt]="globalLogoAlt" loading="lazy" />
              </div>
            </div>

            <!-- Acciones (botones apilados) -->
            <div class="hero__actions hero__actions--stacked">
              <a
                *ngFor="let action of hero.actions"
                class="btn"
                [ngClass]="{
                  'btn-primary': action.variant === 'primary',
                  'btn-secondary': action.variant === 'secondary'
                }"
                [routerLink]="action.routerLink || null"
                [href]="action.href || null"
                [attr.data-strapi-uid]="action.dataStrapiUid"
                [attr.target]="action.href?.startsWith('http') ? '_blank' : null"
                [attr.rel]="action.href?.startsWith('http') ? 'noopener' : null"
              >
                {{ action.label }}
              </a>
            </div>
          </div>
        </div>

        <div class="attended-section" data-strapi-section="attended-persons" *ngIf="attendedPersons.length">
          <div class="section__header">
            <span class="section__eyebrow">Nuestro impacto</span>
            <h2 class="section__title">Personas atendidas</h2>
            <p class="section__subtitle">Estos son los datos de nuestra comunidad a lo largo del a√±o</p>
          </div>
          <div class="attended-grid">
            <article class="card attended-card attended-card--{{ person.theme }}" *ngFor="let person of attendedPersons">
              <div class="attended-card__icon">{{ person.icon }}</div>
              <div class="attended-card__content">
                <h3 class="attended-card__program">{{ person.program }}</h3>
                <p class="attended-card__count">{{ person.count }}</p>
                <p class="attended-card__description">{{ person.description }}</p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" data-strapi-section="identity">
  <div class="container">
    <div class="identity__intro">
      <span class="section__eyebrow">Nuestra identidad</span>
      <h2 class="identity__title">Formamos y acompa√±amos comunidades en el Cauca</h2>
      <p class="identity__subtitle">
        Presentamos la esencia de FACOPEC con una estructura clara para gestionar la informaci√≥n y comunicar nuestro
        prop√≥sito de forma cercana.
      </p>
    </div>
    <div class="identity__grid">
      <div class="identity-description-with-image">
        <article
          class="card identity-card identity-card--description"
          [class.identity-card--expanded]="identityExpanded.description"
          [attr.data-strapi-uid]="identity.dataStrapiUid"
        >
          <h3 class="identity-card__title">Descripci√≥n de la fundaci√≥n</h3>
          <div class="identity-card__body" id="identity-description">
            <p>{{ identity.description }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('description')"
            [attr.aria-expanded]="identityExpanded.description"
            aria-controls="identity-description"
          >
            {{ identityExpanded.description ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>
        <div class="identity-image">
          <img src="assets/fotos-fundacion/apoyo.webp" alt="Fundaci√≥n Afrocolombiana Profe en Casa en acci√≥n" loading="lazy" />
        </div>
      </div>

      <article class="card values-card" data-strapi-uid="about.values">
        <h3 class="identity-card__title">Valores que nos gu√≠an</h3>
        <ul class="values-card__list">
          <li
            class="values-card__item"
            *ngFor="let value of identity.values"
            [attr.data-strapi-uid]="value.dataStrapiUid"
          >
            <span class="values-card__icon">{{ value.icon }}</span>
            <div class="values-card__copy">
              <p class="values-card__title">{{ value.title }}</p>
              <p class="values-card__description">{{ value.description }}</p>
            </div>
          </li>
        </ul>
      </article>

      <div class="identity__pair">
        <article
          class="card identity-card"
          [class.identity-card--expanded]="identityExpanded.mission"
          [attr.data-strapi-uid]="missionVision.dataStrapiUidMission"
        >
          <div class="identity-card__icon">üåü</div>
          <h3 class="identity-card__title">Misi√≥n</h3>
          <div class="identity-card__body" id="identity-mission">
            <p>{{ missionVision.mission }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('mission')"
            [attr.aria-expanded]="identityExpanded.mission"
            aria-controls="identity-mission"
          >
            {{ identityExpanded.mission ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>

        <article
          class="card identity-card"
          [class.identity-card--expanded]="identityExpanded.vision"
          [attr.data-strapi-uid]="missionVision.dataStrapiUidVision"
        >
          <div class="identity-card__icon">üöÄ</div>
          <h3 class="identity-card__title">Visi√≥n</h3>
          <div class="identity-card__body" id="identity-vision">
            <p>{{ missionVision.vision }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('vision')"
            [attr.aria-expanded]="identityExpanded.vision"
            aria-controls="identity-vision"
          >
            {{ identityExpanded.vision ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>
      </div>
    </div>
  </div>
</section>

<section class="section" id="programas" data-strapi-section="activities">
  <div class="container">
    <div class="section__heading">
      <span class="section__eyebrow">Programas</span>
      <h2 class="section__title">Programas que se viven en comunidad</h2>
      <p class="section__subtitle">
        Conecta con nuestras actividades destacadas y descubre m√°s detalles en el blog oficial de la fundaci√≥n.
      </p>
    </div>
    <div class="programs-grid">
      <a
        *ngFor="let program of programLogos"
        [href]="program.href"
        target="_blank"
        rel="noopener"
        class="program-card"
        [attr.aria-label]="program.alt"
      >
        <div class="program-card__logo">
          <img [src]="program.logo" [alt]="program.alt" loading="lazy" />
        </div>
        <h3 class="program-card__title">{{ program.alt }}</h3>
      </a>
    </div>
  </div>
</section>

<section class="section section--memorias" data-strapi-section="gallery">
  <div class="container">
    <div class="section__heading">
      <span class="section__eyebrow">Memorias</span>
      <h2 class="section__title">Nuestras actividades</h2>
    </div>
    <div class="gallery-carousel">
      <div class="gallery-carousel__track">
        <!-- First set -->
        <a
          class="gallery-card"
          *ngFor="let item of galleryItems; let i = index"
          [href]="item.href"
          target="_blank"
          rel="noopener"
          [attr.data-strapi-collection]="item.strapiCollection"
          [attr.data-strapi-entry]="item.strapiEntryId"
          [class.gallery-card--teal]="i % 4 === 0"
          [class.gallery-card--blue]="i % 4 === 1"
          [class.gallery-card--rose]="i % 4 === 2"
          [class.gallery-card--gold]="i % 4 === 3"
        >
          <div class="gallery-card__logo">
            <img [src]="item.cover" [alt]="item.title" loading="lazy" />
          </div>
          <div class="gallery-card__content">
            <h3 class="gallery-card__title">{{ item.title }}</h3>
            <p class="gallery-card__description">{{ item.description }}</p>
          </div>
        </a>
        <!-- Duplicate set for infinite scroll -->
        <a
          class="gallery-card"
          *ngFor="let item of galleryItems; let i = index"
          [href]="item.href"
          target="_blank"
          rel="noopener"
          [attr.data-strapi-collection]="item.strapiCollection"
          [attr.data-strapi-entry]="item.strapiEntryId"
          [class.gallery-card--teal]="i % 4 === 0"
          [class.gallery-card--blue]="i % 4 === 1"
          [class.gallery-card--rose]="i % 4 === 2"
          [class.gallery-card--gold]="i % 4 === 3"
        >
          <div class="gallery-card__logo">
            <img [src]="item.cover" [alt]="item.title" loading="lazy" />
          </div>
          <div class="gallery-card__content">
            <h3 class="gallery-card__title">{{ item.title }}</h3>
            <p class="gallery-card__description">{{ item.description }}</p>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Employability Section -->
<section class="section section--employability" id="empleabilidad">
  <div class="container">
    <div class="employability-content">
      <!-- Logo sin card -->
      <div class="employability-logo">
        <a href="https://empleabilidad-facopec.blogspot.com/" target="_blank" rel="noopener">
          <img src="assets/program-logos/emplpeabilidad.png" alt="Programa de Empleabilidad FACOPEC" loading="lazy" />
        </a>
      </div>

      <!-- Formulario de empleabilidad -->
      <div class="employability-form">
        <h2 class="employability-form__title">¬øTe interesa nuestro programa de empleabilidad?</h2>
        <p class="employability-form__description">
          Completa este formulario y nos pondremos en contacto contigo para apoyarte en tu proceso de formaci√≥n y b√∫squeda de empleo.
        </p>

        <form *ngIf="!employabilityFormSubmitted" (ngSubmit)="submitEmployabilityForm()" #employabilityFormRef="ngForm">
          <div *ngIf="employabilityFormError" class="form-error">
            {{ employabilityFormError }}
          </div>

          <div class="form-field">
            <label for="employability-name">Nombre completo *</label>
            <input
              type="text"
              id="employability-name"
              name="name"
              [(ngModel)]="employabilityForm.name"
              required
              placeholder="Tu nombre completo"
            />
          </div>

          <div class="form-row">
            <div class="form-field">
              <label for="employability-email">Correo electr√≥nico *</label>
              <input
                type="email"
                id="employability-email"
                name="email"
                [(ngModel)]="employabilityForm.email"
                required
                placeholder="tu@email.com"
              />
            </div>

            <div class="form-field">
              <label for="employability-phone">Tel√©fono *</label>
              <input
                type="tel"
                id="employability-phone"
                name="phone"
                [(ngModel)]="employabilityForm.phone"
                required
                placeholder="+57 300 123 4567"
              />
            </div>
          </div>

          <div class="form-field">
            <label for="employability-education">Nivel educativo *</label>
            <select id="employability-education" name="education" [(ngModel)]="employabilityForm.education" required>
              <option value="">Selecciona una opci√≥n</option>
              <option value="primaria">Primaria</option>
              <option value="bachillerato">Bachillerato</option>
              <option value="tecnico">T√©cnico</option>
              <option value="tecnologo">Tecn√≥logo</option>
              <option value="profesional">Profesional</option>
              <option value="posgrado">Posgrado</option>
            </select>
          </div>

          <div class="form-field">
            <label for="employability-interests">√Åreas de inter√©s</label>
            <textarea
              id="employability-interests"
              name="interests"
              [(ngModel)]="employabilityForm.interests"
              rows="3"
              placeholder="Cu√©ntanos en qu√© √°reas te gustar√≠a trabajar o formarte..."
            ></textarea>
          </div>

          <button type="submit" class="btn btn--primary employability-form__submit" [disabled]="!employabilityFormRef.valid || employabilityFormSubmitting">
            <span *ngIf="!employabilityFormSubmitting">Enviar solicitud</span>
            <span *ngIf="employabilityFormSubmitting">Enviando...</span>
          </button>

          <p class="form-note">* Campos obligatorios</p>
        </form>

        <div class="employability-form__success" *ngIf="employabilityFormSubmitted">
          <span class="employability-form__success-icon">‚úÖ</span>
          <h3>¬°Gracias por tu inter√©s!</h3>
          <p>Hemos recibido tu solicitud. Nos pondremos en contacto contigo muy pronto.</p>
        </div>
      </div>
    </div>
  </div>
</section>
