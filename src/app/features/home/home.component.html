<section class="section" id="inicio" data-strapi-collection="home" data-strapi-section="hero">
  <div class="container">
    <div class="hero-stage">
      <!-- Calendario flotante a la izquierda -->
      <aside class="calendar-sidebar" data-strapi-section="event-calendar" *ngIf="eventCalendar.length">
        <div class="calendar-widget">
          <div class="calendar-widget__header">
            <span class="section__eyebrow">Pr√≥ximas actividades</span>
            <h3 class="calendar-widget__title">Calendario</h3>
          </div>
          <div class="calendar-widget__events">
            <article
              class="calendar-event-compact"
              *ngFor="let event of eventCalendar"
              [class.calendar-event-compact--highlighted]="event.isHighlighted"
              [class.calendar-event-compact--{{ event.color }}]="event.color"
            >
              <div class="calendar-event-compact__date">
                <span class="calendar-event-compact__day">{{ event.eventDate | date: 'dd' }}</span>
                <span class="calendar-event-compact__month">{{ event.eventDate | date: 'MMM' }}</span>
              </div>
              <div class="calendar-event-compact__content">
                <h4 class="calendar-event-compact__title">{{ event.title }}</h4>
                <p class="calendar-event-compact__time" *ngIf="event.eventDate">
                  üïê {{ event.eventDate | date: 'shortTime' }}
                </p>
                <span class="calendar-event-compact__category">{{ event.category }}</span>
              </div>
            </article>
          </div>
        </div>
      </aside>

      <div class="hero-stage__main">
        <div class="hero">
          <!-- Fila superior: Eyebrow y T√≠tulo -->
          <div class="hero__header">
            <span class="hero__badge">{{ hero.eyebrow }}</span>
            <h1 class="hero__title hero__title--large">
              <span *ngFor="let line of hero.title">{{ line }}</span>
            </h1>
          </div>

          <!-- Carousel con mensaje b√≠blico integrado -->
          <div class="hero__carousel-wrapper">
            <div class="hero__carousel">
              <app-hero-carousel
                [images]="carouselImages"
                [autoPlayInterval]="6000"
                [autoPlay]="true">
              </app-hero-carousel>
            </div>

            <!-- Mensaje b√≠blico integrado con el carousel -->
            <div class="callout" data-strapi-collection="hero.verse">
              <div class="callout__badge">{{ hero.verse.reference }}</div>
              <p class="callout__title">{{ hero.verse.text }}</p>
              <p class="callout__text">{{ hero.verse.description }}</p>
              <div class="callout__media" aria-hidden="true">
                <img [src]="globalLogoUrl" [alt]="globalLogoAlt" loading="lazy" />
              </div>
            </div>
          </div>

          <!-- Impact strip debajo del carousel -->
          <div class="impact-strip" data-strapi-section="impact">
            <div class="impact-strip__items">
              <div class="impact-strip__item" *ngFor="let item of impactHighlights" [attr.data-strapi-uid]="item.dataStrapiUid">
                <span class="impact-strip__icon">{{ item.icon }}</span>
                <div>
                  <p class="impact-strip__title">{{ item.title }}</p>
                  <p class="impact-strip__label">{{ item.label }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Acciones (botones) -->
          <div class="hero__actions">
            <a
              *ngFor="let action of hero.actions"
              class="btn"
              [ngClass]="{
                'btn-primary': action.variant === 'primary',
                'btn-secondary': action.variant === 'secondary'
              }"
              [routerLink]="action.routerLink || null"
              [href]="action.href || null"
              [attr.data-strapi-uid]="action.dataStrapiUid"
              [attr.target]="action.href?.startsWith('http') ? '_blank' : null"
              [attr.rel]="action.href?.startsWith('http') ? 'noopener' : null"
            >
              {{ action.label }}
            </a>
          </div>
        </div>

        <div class="attended-section" data-strapi-section="attended-persons" *ngIf="attendedPersons.length">
          <div class="section__header">
            <span class="section__eyebrow">Nuestro impacto</span>
            <h2 class="section__title">Personas atendidas</h2>
            <p class="section__subtitle">Estos son los datos de nuestra comunidad a lo largo del a√±o</p>
          </div>
          <div class="attended-grid">
            <article class="card attended-card attended-card--{{ person.theme }}" *ngFor="let person of attendedPersons">
              <div class="attended-card__icon">{{ person.icon }}</div>
              <div class="attended-card__content">
                <h3 class="attended-card__program">{{ person.program }}</h3>
                <p class="attended-card__count">{{ person.count }}</p>
                <p class="attended-card__description">{{ person.description }}</p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" data-strapi-section="identity">
  <div class="container">
    <div class="identity__intro">
      <span class="section__eyebrow">Nuestra identidad</span>
      <h2 class="identity__title">Formamos y acompa√±amos comunidades en el Valle del Cauca</h2>
      <p class="identity__subtitle">
        Presentamos la esencia de FACOPEC con una estructura clara para gestionar la informaci√≥n desde Strapi y comunicar nuestro
        prop√≥sito de forma cercana.
      </p>
    </div>
    <div class="identity__grid">
      <div class="identity-description-with-image">
        <article
          class="card identity-card identity-card--description"
          [class.identity-card--expanded]="identityExpanded.description"
          [attr.data-strapi-uid]="identity.dataStrapiUid"
        >
          <h3 class="identity-card__title">Descripci√≥n de la fundaci√≥n</h3>
          <div class="identity-card__body" id="identity-description">
            <p>{{ identity.description }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('description')"
            [attr.aria-expanded]="identityExpanded.description"
            aria-controls="identity-description"
          >
            {{ identityExpanded.description ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>
        <div class="identity-image">
          <img src="assets/fotos-fundacion/apoyo.webp" alt="Fundaci√≥n Afrocolombiana Profe en Casa en acci√≥n" loading="lazy" />
        </div>
      </div>

      <article class="card values-card" data-strapi-uid="about.values">
        <h3 class="identity-card__title">Valores que nos gu√≠an</h3>
        <ul class="values-card__list">
          <li
            class="values-card__item"
            *ngFor="let value of identity.values"
            [attr.data-strapi-uid]="value.dataStrapiUid"
          >
            <span class="values-card__icon">{{ value.icon }}</span>
            <div class="values-card__copy">
              <p class="values-card__title">{{ value.title }}</p>
              <p class="values-card__description">{{ value.description }}</p>
            </div>
          </li>
        </ul>
      </article>

      <div class="identity__pair">
        <article
          class="card identity-card"
          [class.identity-card--expanded]="identityExpanded.mission"
          [attr.data-strapi-uid]="missionVision.dataStrapiUidMission"
        >
          <div class="identity-card__icon">üåü</div>
          <h3 class="identity-card__title">Misi√≥n</h3>
          <div class="identity-card__body" id="identity-mission">
            <p>{{ missionVision.mission }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('mission')"
            [attr.aria-expanded]="identityExpanded.mission"
            aria-controls="identity-mission"
          >
            {{ identityExpanded.mission ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>

        <article
          class="card identity-card"
          [class.identity-card--expanded]="identityExpanded.vision"
          [attr.data-strapi-uid]="missionVision.dataStrapiUidVision"
        >
          <div class="identity-card__icon">üöÄ</div>
          <h3 class="identity-card__title">Visi√≥n</h3>
          <div class="identity-card__body" id="identity-vision">
            <p>{{ missionVision.vision }}</p>
          </div>
          <button
            type="button"
            class="identity-card__toggle"
            (click)="toggleIdentityCard('vision')"
            [attr.aria-expanded]="identityExpanded.vision"
            aria-controls="identity-vision"
          >
            {{ identityExpanded.vision ? 'Ver menos' : 'Leer m√°s' }}
          </button>
        </article>
      </div>
    </div>
  </div>
</section>

<section class="section" id="programas" data-strapi-section="activities">
  <div class="container">
    <div class="section__heading">
      <span class="section__eyebrow">Programas</span>
      <h2 class="section__title">Programas que se viven en comunidad</h2>
      <p class="section__subtitle">
        Conecta con nuestras actividades destacadas y descubre m√°s detalles en el blog oficial de la fundaci√≥n.
      </p>
    </div>
    <div class="grid-2 activity-grid">
      <article
        class="card activity-card"
        *ngFor="let activity of activityCards"
        [attr.data-strapi-uid]="activity.dataStrapiUid"
      >
        <div class="activity-card__icon" [ngClass]="activity.theme">{{ activity.icon }}</div>
        <h3 class="card__title">{{ activity.title }}</h3>
        <p class="card__text">{{ activity.description }}</p>
        <a class="card__link" [href]="activity.href" target="_blank" rel="noopener">
          Ver m√°s
          <span aria-hidden="true">‚Üó</span>
        </a>
      </article>
    </div>
  </div>
</section>

<section class="section section--tinted" id="proyectos" data-strapi-section="programs">
  <div class="container">
    <div class="section__heading">
      <span class="section__eyebrow">Proyectos destacados</span>
      <h2 class="section__title">Historias que transforman el territorio</h2>
      <p class="section__subtitle">
        Cada iniciativa nace de escuchar a la comunidad y sumar aliados que creen en la educaci√≥n como motor de cambio.
      </p>
    </div>

    <div class="grid-2 project-grid">
      <article
        class="card project-card"
        *ngFor="let program of programCards"
        [attr.data-strapi-collection]="program.strapiCollection"
        [attr.data-strapi-entry]="program.strapiEntryId"
      >
        <div class="project-card__media" *ngIf="program.logo">
          <img [src]="program.logo" [alt]="program.logoAlt || program.title" loading="lazy" />
        </div>
        <div class="project-card__body">
          <h3 class="project-card__title">{{ program.title }}</h3>
          <p class="project-card__text">{{ program.description }}</p>
          <div class="pill-row">
            <span class="pill" *ngFor="let pill of program.highlights">{{ pill }}</span>
          </div>
        </div>
        <a class="card__link" [href]="program.href" target="_blank" rel="noopener">
          Leer en el blog
          <span aria-hidden="true">‚Üó</span>
        </a>
      </article>
    </div>
  </div>
</section>

<section class="section" data-strapi-section="gallery">
  <div class="container">
    <div class="section__heading">
      <span class="section__eyebrow">Memorias</span>
      <h2 class="section__title">Nuestras actividades</h2>
    </div>
    <div class="gallery-grid">
      <article
        class="gallery-card"
        *ngFor="let item of galleryItems"
        [attr.data-strapi-collection]="item.strapiCollection"
        [attr.data-strapi-entry]="item.strapiEntryId"
      >
        <img [src]="item.cover" [alt]="item.title" loading="lazy" />
        <div class="gallery-card__caption">
          <p>{{ item.title }}</p>
        </div>
        <a class="gallery-card__overlay" [href]="item.href" target="_blank" rel="noopener">{{ item.description }}</a>
      </article>
    </div>
  </div>
</section>
