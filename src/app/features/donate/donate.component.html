<div class="donation-page">
  <section class="section donation-hero" data-strapi-section="donations.hero">
    <div class="container donation-hero__grid">
      <div class="donation-hero__content">
        <span class="donation-hero__badge">Fundaci√≥n Afrocolombiana Profe en Casa</span>
        <h1 class="donation-hero__title">
          {{ heroTitlePrimary }}
          <span *ngIf="heroTitleHighlight">{{ heroTitleHighlight }}</span>
        </h1>
        <p class="donation-hero__text">
          {{ heroDescription }}
        </p>
        <div class="donation-hero__stats">
          <div
            class="donation-hero__stat"
            *ngFor="let stat of donationStats"
            [attr.data-strapi-uid]="stat.dataStrapiUid"
          >
            <span class="donation-hero__stat-value">{{ stat.value }}</span>
            <span class="donation-hero__stat-label">{{ stat.label }}</span>
          </div>
        </div>
      </div>
      <div class="donation-hero__media" aria-hidden="true">
        <div class="donation-hero__collage">
          <figure
            class="donation-hero__photo"
            *ngFor="let story of donationStories; let index = index"
            [class.donation-hero__photo--offset]="index === 1"
            [attr.data-strapi-collection]="story.strapiCollection"
            [attr.data-strapi-entry]="story.strapiEntryId"
          >
            <img [src]="story.cover" [alt]="story.title" loading="lazy" />
            <figcaption>{{ story.title }}</figcaption>
          </figure>
        </div>
      </div>
    </div>
  </section>

  <section class="section" id="impacto" data-strapi-section="donations.impact">
    <div class="container">
      <div class="section__heading">
        <span class="section__eyebrow">Impacto real</span>
        <h2 class="section__title">As√≠ transformamos tu donaci√≥n</h2>
        <p class="section__subtitle">
          Tu solidaridad nos permite sostener programas integrales con enfoque comunitario, cultural y de fe.
          Estos son algunos de los frentes que acompa√±amos gracias a los aportes mensuales y puntuales.
        </p>
      </div>

      <div class="donation-impact">
        <article
          class="donation-impact__card"
          *ngFor="let highlight of donationHighlights"
          [ngClass]="'donation-impact__card--' + highlight.theme"
          [attr.data-strapi-uid]="highlight.dataStrapiUid"
        >
          <span class="donation-impact__icon">{{ highlight.icon }}</span>
          <h3>{{ highlight.title }}</h3>
          <p>{{ highlight.description }}</p>
        </article>
      </div>
    </div>
  </section>

  <section class="section section--tinted" data-strapi-section="donations.gallery">
    <div class="container">
      <div class="section__heading">
        <span class="section__eyebrow">Historias en im√°genes</span>
        <h2 class="section__title">Tu aporte en acci√≥n</h2>
        <p class="section__subtitle">
          Organizamos una galer√≠a lista para Strapi con testimonios, actividades y proyectos para que puedas
          destacar f√°cilmente en la web o redes sociales.
        </p>
      </div>

      <div class="donation-gallery">
        <article
          class="donation-gallery__item"
          *ngFor="let story of donationStories"
          [attr.data-strapi-collection]="story.strapiCollection"
          [attr.data-strapi-entry]="story.strapiEntryId"
        >
          <div class="donation-gallery__media">
            <img [src]="story.cover" [alt]="story.title" loading="lazy" />
          </div>
          <div class="donation-gallery__body">
            <h3 class="donation-gallery__title">{{ story.title }}</h3>
            <p class="donation-gallery__description">{{ story.description }}</p>
            <p class="donation-gallery__impact">{{ story.impact }}</p>
            <a class="donation-gallery__link" [href]="story.href" target="_blank" rel="noopener">
              Ver en el blog
              <span aria-hidden="true">‚Üó</span>
            </a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <section class="section" data-strapi-section="donations.form" id="donacion">
    <div class="container">
      <div class="donation-form">
        <div class="donation-form__header">
          <span class="donation-form__badge">Haz tu donaci√≥n</span>
          <h2>Selecciona el monto y la frecuencia de tu aporte</h2>
          <p>
            Elige una de las opciones sugeridas o ingresa el valor que prefieras. Puedes apoyar una sola vez
            o sumarte al c√≠rculo de aliadas y aliados mensuales.
          </p>
        </div>

        <div class="donation-form__body">
          <div class="donation-form__group">
            <h3 class="donation-form__title">Montos sugeridos</h3>
            <div class="donation-amounts">
              <button
                *ngFor="let amount of donationAmounts"
                (click)="selectAmount(amount.value)"
                class="donation-option"
                [class.donation-option--active]="selectedAmount() === amount.value"
              >
                <span class="donation-option__icon">{{ amount.icon }}</span>
                <span class="donation-option__label">{{ amount.label }}</span>
                <span class="donation-option__impact">{{ amount.impact }}</span>
              </button>
            </div>
          </div>

          <div class="donation-form__group">
            <h3 class="donation-form__title">Monto personalizado</h3>
            <div class="donation-input">
              <span>$</span>
              <input
                type="number"
                [(ngModel)]="customAmount"
                (input)="onCustomAmountChange()"
                placeholder="Ingresa tu monto"
                aria-label="Monto personalizado para donar"
              />
            </div>
          </div>

          <div class="donation-form__group">
            <h3 class="donation-form__title">Tipo de donaci√≥n</h3>
            <div class="donation-type">
              <button
                type="button"
                class="donation-type__option"
                [class.donation-type__option--active]="donationType() === 'once'"
                (click)="donationType.set('once')"
              >
                <span class="donation-type__icon">üíù</span>
                <div>
                  <strong>√önica</strong>
                  <p>Realiza un aporte puntual cuando quieras.</p>
                </div>
              </button>
              <button
                type="button"
                class="donation-type__option"
                [class.donation-type__option--active]="donationType() === 'monthly'"
                (click)="donationType.set('monthly')"
              >
                <span class="donation-type__icon">üîÑ</span>
                <div>
                  <strong>Mensual</strong>
                  <p>Genera impacto continuo con un apoyo recurrente.</p>
                </div>
              </button>
            </div>
          </div>

          <div class="donation-form__group donation-form__gateways" id="pasarelas">
            <h3 class="donation-form__title">Pasarelas de pago</h3>
            <div class="donation-gateways">
              <article
                class="donation-gateway"
                *ngFor="let gateway of paymentGateways"
                [ngClass]="'donation-gateway--' + gateway.theme"
              >
                <span class="donation-gateway__badge">{{ gateway.badge }}</span>
                <h4 class="donation-gateway__title">{{ gateway.name }}</h4>
                <p class="donation-gateway__text">{{ gateway.description }}</p>
                <a
                  class="donation-gateway__action btn btn--primary"
                  [href]="gateway.href"
                  target="_blank"
                  rel="noopener"
                >
                  {{ gateway.actionLabel }}
                </a>
              </article>
            </div>
          </div>

          <div class="donation-impact-note" *ngIf="selectedAmount() > 0">
            <strong>üíö Tu impacto:</strong>
            <span>{{ getImpactMessage() }}</span>
          </div>

          <button
            type="button"
            class="donation-submit btn btn--primary"
            (click)="processDonation()"
            [disabled]="selectedAmount() === 0"
          >
            <span *ngIf="selectedAmount() > 0">Donar {{ selectedAmount() | number:'1.0-0':'es-CO' }} COP</span>
            <span *ngIf="selectedAmount() === 0">Selecciona un monto para donar</span>
          </button>

          <div class="donation-form__footer">
            <div class="donation-form__payments">
              <span>M√©todos de pago:</span>
              <ul>
                <li>üí≥ PayPal</li>
                <li>üí∞ Transferencia</li>
                <li>üì± PSE</li>
              </ul>
            </div>
            <p class="donation-form__secure">
              <span aria-hidden="true">üîí</span>
              Donaci√≥n 100% segura y cifrada
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section section--partner" data-strapi-section="donations.partner-form">
    <div class="container">
      <div class="partner-form-wrapper">
        <div class="partner-form__header">
          <h2 class="partner-form__title">¬øQuieres ser aliado?</h2>
          <p class="partner-form__subtitle">
            √önete a nuestra red de aliados y ay√∫danos a transformar vidas en el Cauca.
            Comparte tus datos y nos pondremos en contacto contigo.
          </p>
        </div>

        <form class="partner-form" *ngIf="!partnerFormSubmitted" (ngSubmit)="submitPartnerForm($event)">
          <div class="partner-form__row">
            <div class="form-field">
              <label for="partner-name">Nombre completo</label>
              <input
                type="text"
                id="partner-name"
                name="name"
                [(ngModel)]="partnerForm.name"
                required
                placeholder="Tu nombre"
              />
            </div>

            <div class="form-field">
              <label for="partner-email">Correo electr√≥nico</label>
              <input
                type="email"
                id="partner-email"
                name="email"
                [(ngModel)]="partnerForm.email"
                required
                placeholder="tu@email.com"
              />
            </div>
          </div>

          <div class="partner-form__row">
            <div class="form-field">
              <label for="partner-phone">Tel√©fono</label>
              <input
                type="tel"
                id="partner-phone"
                name="phone"
                [(ngModel)]="partnerForm.phone"
                placeholder="+57 300 123 4567"
              />
            </div>

            <div class="form-field">
              <label for="partner-donation-type">Tipo de apoyo</label>
              <select id="partner-donation-type" name="donationType" [(ngModel)]="partnerForm.donationType" required>
                <option value="">Selecciona una opci√≥n</option>
                <option value="monetary">Donaci√≥n monetaria</option>
                <option value="in-kind">Donaci√≥n en especie</option>
                <option value="volunteer">Voluntariado</option>
                <option value="corporate">Alianza corporativa</option>
                <option value="other">Otro</option>
              </select>
            </div>
          </div>

          <div class="form-field">
            <label for="partner-message">Mensaje (opcional)</label>
            <textarea
              id="partner-message"
              name="message"
              [(ngModel)]="partnerForm.message"
              rows="4"
              placeholder="Cu√©ntanos c√≥mo quieres ayudar..."
            ></textarea>
          </div>

          <button type="submit" class="btn btn--primary partner-form__submit">
            Enviar solicitud
          </button>
        </form>

        <div class="partner-form__success" *ngIf="partnerFormSubmitted">
          <span class="partner-form__success-icon">‚úÖ</span>
          <h3>¬°Gracias por tu inter√©s!</h3>
          <p>Hemos recibido tu solicitud. Nos pondremos en contacto contigo muy pronto.</p>
          <button type="button" class="btn btn--secondary" (click)="resetPartnerForm()">
            Enviar otra solicitud
          </button>
        </div>
      </div>
    </div>
  </section>

  <section class="section" data-strapi-section="donations.other-ways">
    <div class="container">
      <div class="section__heading">
        <span class="section__eyebrow">M√°s maneras de apoyar</span>
        <h2 class="section__title">Otras formas de ayudar</h2>
        <p class="section__subtitle">
          Puedes sumar tu talento, compartir la misi√≥n o vincular nuevos aliados. Cada gesto impulsa los
          procesos comunitarios en Puerto Tejada y el Cauca.
        </p>
      </div>

      <div class="grid-3">
        <article
          class="card support-card"
          *ngFor="let action of supportActions"
          [attr.data-strapi-uid]="action.dataStrapiUid"
        >
          <div class="support-card__icon" [ngClass]="'support-card__icon--' + action.theme">{{ action.icon }}</div>
          <h3 class="card__title">{{ action.title }}</h3>
          <p class="card__text">{{ action.description }}</p>
          <a
            class="card__link"
            *ngIf="action.href.startsWith('http')"
            [href]="action.href"
            target="_blank"
            rel="noopener"
          >
            {{ action.linkLabel }}
            <span aria-hidden="true">‚Üó</span>
          </a>
          <a
            class="card__link"
            *ngIf="!action.href.startsWith('http')"
            [routerLink]="action.href"
          >
            {{ action.linkLabel }}
          </a>
        </article>
      </div>
    </div>
  </section>
</div>
